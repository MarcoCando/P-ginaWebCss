<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Academics</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel="stylesheet" type="text/css" href="../Content/sweetalert2.min.css" />
    <script src="../Content/sweetalert2.all.min.js"></script>
    <script src="../Content/sweetalert2.min.js"></script>
    <link rel="stylesheet" href="Content/sweetalert2.min.css" />
    <script type="text/javascript" src="Content/sweetalert2.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <link rel="stylesheet" href="../Content/bootstrap.css" />
    <link rel="stylesheet" href="../Styles/StylesAcademics.css" />

    <script src="../Scripts/jquery-3.0.0.min.js"></script>

    <script src="../Scripts/bootstrap.min.js"></script>
    <script src="../Scripts/bootstrap.bundle.min.js"></script>
    <script src="../Confirmation/js/ConfirmationModal.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.1/css/all.css" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/df2ecd1a25.js" crossorigin="anonymous"></script>

    <script src="
https://cdn.jsdelivr.net/npm/sweetalert2@11.12.3/dist/sweetalert2.all.min.js
"></script>
    <link href="
https://cdn.jsdelivr.net/npm/sweetalert2@11.12.3/dist/sweetalert2.min.css
" rel="stylesheet">

</head>

<body>
    <section>
        <nav style="background-color: #153d64;">
            <div class="logo">
                <img src="assets/Logo64x64.png" />
                <h1>Sistema Académico</h1>
            </div>
            <div class="hamburger">
                <span class="line"></span>
                <span class="line"></span>
                <span class="line"></span>
            </div>
        </nav>
        <div class="menubar">
            <ul>
                <li>
                    <i class="fa-solid fa-arrow-right"></i><a href="#">Inicio <i class="fa-solid fa-house"></i></a>
                </li>
                <li>
                    <i class="fa-solid fa-arrow-right"></i><a href="#">Lenguaje <i
                            class="fa-solid fa-earth-americas"></i></a>
                    <i class="fa-solid fa-arrow-right"></i><a href="parametro.html">Español <img width="20" height="20"
                            src="https://img.icons8.com/color/48/spain-circular.png" alt="spain-circular" /></a>
                    <i class="fa-solid fa-arrow-right"></i><a href="Parametro2.html">Inglés <img width="20" height="20"
                            src="https://img.icons8.com/color/48/usa-circular.png" alt="usa-circular" /></a>
                </li>
            </ul>
        </div>
    </section>
    <section class="welcome">
        <div class="card m-2" style="background-color: #f5f5f5;">
            <div class="card-header">
                <div class="welcome-2">
                    <h2>Configuracion <i class="fa fa-info-circle"></i></h2>
                </div>
            </div>
            <form action="">
                <div style="right: 20px; position: absolute; padding: 20px 50px;">
                    <a href="parametro.html" id="nextButton" class="btn btn-outline-success"
                        style="border-radius: 10px 40px 40px 10px; border: solid 1px;">
                        Siguiente
                    </a>
                </div>
                <div style="left: 20px; position: absolute; padding: 20px 50px;">
                    <button type="button" class="btn btn-outline-info" onclick="enviarDatos()">
                        Enviar
                    </button>
                </div>
                <br>
                <div class="p-5">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="input-group mb-3">
                                <div class="input-group-prepend col-3">
                                    <span class="span-title">Nombre</span>
                                </div>
                                <input type="text" id="name" name="name" value="Configuración Ejemplo" class="col-9">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="input-group mb-3">
                                <div class="input-group-prepend col-3">
                                    <span class="span-title">Número de Semanas</span>
                                </div>
                                <input type="number" id="semanas" name="semanas" value="16" class=" col-9">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="input-group mb-3">
                                <div class="input-group-prepend col-3">
                                    <span class="span-title">Modalidad</span>
                                </div>
                                <select id="drpModalidad" class="Dropdowns col-9">
                                    <option value="Presencial">Presencial</option>
                                    <option value="opcion2">Opción 2</option>
                                    <option value="opcion3">Opción 3</option>
                                    <option value="opcion4">Opción 4</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="input-group mb-3">
                                <div class="input-group-prepend col-3">
                                    <span class="span-title">Relación</span>
                                </div>
                                <input type="text" id="relacion" name="relacion" value="Relación Ejemplo"
                                    class=" col-9">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="input-group mb-3">
                                <div class="input-group-prepend col-3">
                                    <span class="span-title">Número Máximo de Créditos</span>
                                </div>
                                <input type="number" id="num_max_credits" name="num_max_credits" value="30"
                                    class=" col-9">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="input-group mb-3">
                                <div class="input-group-prepend col-3">
                                    <span class="span-title">Número Máximo de Periodos</span>
                                </div>
                                <input type="number" id="num_max_periods" name="num_max_periods" value="6" class="
                                col-9">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="input-group mb-3">
                                <div class="input-group-prepend col-3">
                                    <span class="span-title">Tipo</span>
                                </div>
                                <select id="drpTipoConf" class="Dropdowns col-9">
                                    <option value="Grado">Grado</option>
                                    <option value="Posgrado">Posgrado</option>
                                    <option value="opcion3">Opción 3</option>
                                    <option value="opcion4">Opción 4</option>
                                </select>
                            </div>
                        </div>



                    </div>
                    <hr>
                    <table class="table table-bordered" style="font-size: 12px; display: none;">
                        <thead class="thead-light">
                            <tr>
                                <th>Créditos</th>
                                <th>Docente</th>
                                <th>Autonomo</th>
                                <th>Aplicación</th>
                                <th>Total</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>3</td>
                                <td>48</td>
                                <td>48</td>
                                <td>48</td>
                                <td>144</td>
                                <td class="text-center">
                                    <i class="fas fa-trash-alt text-danger"></i>
                                </td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>64</td>
                                <td>64</td>
                                <td>64</td>
                                <td>192</td>
                                <td class="text-center">
                                    <i class="fas fa-trash-alt text-danger"></i>
                                </td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td>80</td>
                                <td>80</td>
                                <td>80</td>
                                <td>240</td>
                                <td class="text-center">
                                    <i class="fas fa-trash-alt text-danger"></i>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>32</td>
                                <td>32</td>
                                <td>32</td>
                                <td>96</td>
                                <td class="text-center">
                                    <i class="fas fa-trash-alt text-danger"></i>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <!-- Puedes agregar más filas para más campos de entrada si es necesario -->

                </div>
            </form>
        </div>

    </section>



    <script>

        // const proxyUrl = 'https://cors-anywhere.herokuapp.com/';
        const targetUrl = 'http://40.112.56.227:8080/configuration_initial/create';
        // Función para enviar datos al servidor
        async function enviarDatos() {
            // Obtener los valores de los inputs
            const datos = {
                name: document.getElementById('name').value,
                num_max_credits: document.getElementById('num_max_credits').value,
                num_max_periods: document.getElementById('num_max_periods').value,
                tipo: document.getElementById('drpTipoConf').value,
                semanas: document.getElementById('semanas').value,
                modalidad: document.getElementById('drpModalidad').value,
                relacion: document.getElementById('relacion').value
            };

            try {
                // Realizar la solicitud POST
                const respuesta = await fetch('http://40.112.56.227:8080/configuration_initial/create', {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",

                    },
                    body: JSON.stringify(datos),
                    redirect: "follow",
                });


                // Manejar la respuesta
                if (respuesta.ok) {
                    const resultado = await respuesta.json();
                    Swal.fire({
                        title: "Enviado",
                        text: 'Configuración enviada con éxito',
                        icon: "success"
                    });
                    document.getElementById('resultado').innerText = 'Configuración enviada con éxito: ' + JSON.stringify(resultado);
                } else {
                    Swal.fire({
                        title: "Error",
                        text: 'Error al enviar la configuracións: ' + respuesta.statusText,
                        icon: "Error"
                    });
                    document.getElementById('resultado').innerText = 'Error al enviar la configuracións: ' + respuesta.statusText;
                }
            } catch (error) {
                Swal.fire({
                    title: "Enviado",
                    text: 'Configuración enviada con éxito',
                    icon: "success"
                });
                document.getElementById('resultado').innerText = 'Error al enviar la configuración: ' + error.message;

            }
        }

        /*
                const myHeaders = new Headers();
                myHeaders.append("Content-Type", "application/json");
                myHeaders.append("Cookie", "session_id=b62f78c4ee5255ab40060abae738b75b1039047a");
        
        
                const raw = JSON.stringify({
                    "name": "Configuración Ejemplo",
                    "num_max_credits": "30",
                    "num_max_periods": "6",
                    "tipo": "Grado",
                    "semanas": 16,
                    "modalidad": "Presencial",
                    "relacion": "Relación Ejemplo"
                });
        
                const requestOptions = {
                    method: "POST",
                    headers: myHeaders,
                    body: raw,
                    redirect: "follow",
        
                };
        
                fetch("http://40.112.56.227:8080/configuration_initial/create", requestOptions)
                    .then((response) => response.text())
                    .then((result) => console.log(result))
                    .catch((error) => console.error(error));
        */
    </script>
</body>

</html>